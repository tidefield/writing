---
import BaseLayout from "../layouts/BaseLayout.astro";

const posts = await Astro.glob("./*.md");
const sortedPosts = posts
    .filter(post => !post.url.includes("/about"))
    .sort(
        (a, b) =>
            new Date(b.frontmatter.date).getTime() -
            new Date(a.frontmatter.date).getTime(),
    );
---

<BaseLayout title="Writing - Tide Field">
    <ul class="post-list">
        {
            sortedPosts.map((post) => (
                <li class="post-item">
                    <h3 class="post-title">
                        <a href={post.url}>{post.frontmatter.title}</a>
                    </h3>
                    <p class="post-description">
                        {post.frontmatter.description}
                    </p>
                    <div class="post-meta">{post.frontmatter.date}</div>
                </li>
            ))
        }
    </ul>
</BaseLayout>

<style>
    .post-list {
        list-style: none;
        padding: 0;
    }
    .post-item {
        margin-bottom: 2rem;
        padding-bottom: 2rem;
        border-bottom: 1px solid #eee;
    }
    .post-item:last-child {
        border-bottom: none;
    }
    .post-title {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
    }
    .post-title a {
        color: #333;
        text-decoration: none;
    }
    .post-title a:hover {
        color: #0066cc;
    }
    .post-meta {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }
    .post-description {
        color: #555;
    }
</style>
